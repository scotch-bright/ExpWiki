<!DOCTYPE html>
<html>
<head>
	<title>Merge Sort :: A Visual Demo By Khoj Badami</title>
	<style type="text/css">
		canvas {
			border: 1px solid lightgrey;
		}
	</style>
</head>
<body>
	<script src="./libs/jquery-3.5.1.min.js"></script>
	<script src="./libs/matter.min.js"></script>
	<script src="./libs/decomp.min.js"></script>
	<script src="./libs/path-data-polyfill.js"></script>
	<script src="./merge-sort-resources/matterJSBodyBuilders.js"></script>
	
	<script type="text/javascript">
		let allBodies = {};
		let currentIndexOfActionWhenBodiesStopMoving = 0;
		let numbersToBeSorted = [];
		let numberOfSplits = 0;
	</script>

	<script src="./merge-sort-resources/matterJSWorldSetup.js"></script>
	<script src="./merge-sort-resources/utilityFunctions.js"></script>
	<script type="text/javascript">

		function removeArrayOfBodies(arrayOfBodies) {
			arrayOfBodies.forEach((body) => {
				World.remove(world, body);
			});
		}

		function removeTwoBodiesOneAfterTheOther(body1, body2) {
			World.remove(world, body1);
			setTimeout(function(){
				World.remove(world, body2);
			}, 1000);
		}

		let actionsWhenObjectsStopMoving = [
			() => {
				removeArrayOfBodies(
					[
						allBodies.l0Platform1,
						allBodies.l0Platform2,
						allBodies.l0Stopper1,
						allBodies.l0Stopper2
					]
				);
			},
			() => {
				removeArrayOfBodies([
					allBodies.level2_p2,
					allBodies.level2_p3,
					allBodies.level2_s2,
					allBodies.level2_s3,
					allBodies.level2_p4,
					allBodies.level2_s4,
					allBodies.level2_p1,
					allBodies.level2_s1
				]);
			},
			() => {
				let v1 = findClosestCircleValueToPlank(allBodies.l2p2);
				let v2 = findClosestCircleValueToPlank(allBodies.l2p3);
				if (v1 < v2) {
					removeTwoBodiesOneAfterTheOther(allBodies.l2p2, allBodies.l2p3);
				}
				else {
					removeTwoBodiesOneAfterTheOther(allBodies.l2p3, allBodies.l2p2);
				}
			}
		]

	</script>
</body>
</html>